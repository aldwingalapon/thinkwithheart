function ldGetUrlVars() { var t = {}; window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (e, a, s) { t[a] = s }); return t } jQuery(document).ready(function (t) { ("#login" == window.location.hash && f(), void 0 !== ldGetUrlVars().login) && ("failed" == ldGetUrlVars().login && f()); if (void 0 !== ldGetUrlVars()["ld-topic-page"]) { var e = ldGetUrlVars()["ld-topic-page"].split("-"), a = Object.values(e)[0], s = t("#ld-expand-" + a); c(t(s).find(".ld-expand-button")), t("html, body").animate({ scrollTop: t(s).offset().top }, 500) } t("body").on("click", 'a[href="#login"]', function (t) { t.preventDefault(), f() }), t("body").on("click", ".ld-modal-closer", function (t) { t.preventDefault(), h() }), t("body").on("click", function (e) { t(".learndash-wrapper").hasClass("ld-modal-open") && (t(e.target).parents(".ld-modal").length || t(e.target).is("a") || h()) }), t(document).keyup(function (t) { 27 === t.keyCode && h() }), t(".learndash-wrapper").on("click", "a.user_statistic", function (t) { t.preventDefault(); var e = jQuery(this).data("ref_id"), a = jQuery(this).data("quiz_id"), s = jQuery(this).data("user_id"), l = jQuery(this).data("statistic_nonce"), d = { action: "wp_pro_quiz_admin_ajax", func: "statisticLoadUser", data: { quizId: a, userId: s, refId: e, statistic_nonce: l, avg: 0 } }; jQuery("#wpProQuiz_user_overlay, #wpProQuiz_loadUserData").show(); var o = jQuery("#wpProQuiz_user_content").hide(); jQuery.ajax({ type: "POST", url: ajaxurl, dataType: "json", cache: !1, data: d, error: function (t, e, a) { }, success: function (t) { void 0 !== t.html && (o.html(t.html), jQuery("#wpProQuiz_user_content").show(), jQuery("#wpProQuiz_loadUserData").hide(), o.find(".statistic_data").click(function () { return jQuery(this).parents("tr").next().toggle("fast"), !1 })) } }), jQuery("#wpProQuiz_overlay_close").click(function () { jQuery("#wpProQuiz_user_overlay").hide() }) }), o(), t("body").on("click", ".ld-focus-sidebar-trigger", function (e) { t(".ld-focus").hasClass("ld-focus-sidebar-collapsed") ? n() : i() }), t("body").on("click", ".ld-mobile-nav a", function (e) { e.preventDefault(), t(".ld-focus").hasClass("ld-focus-sidebar-collapsed") ? n() : i() }), t(".ld-js-register-account").click(function (e) { e.preventDefault(), t(this).slideUp("slow", function () { t("#ld-user-register").slideDown("slow") }) }); var l = t(window).width(); if (t(window).on("orientationchange", function () { l = t(window).width() }), t(window).on("resize", function () { t(this).width() !== l && setTimeout(function () { o() }, 50) }), t(".ld-course-status-content").length) { var d = 0; t(".ld-course-status-content").each(function () { t(this).height() > d && (d = t(this).height()) }), t(".ld-course-status-content").height(d) } function o() { t(window).width() < 768 ? i() : n() } function i() { t(".ld-focus").addClass("ld-focus-sidebar-collapsed"), t(".ld-mobile-nav").removeClass("expanded"), _() } function n() { t(".ld-focus").removeClass("ld-focus-sidebar-collapsed"), t(".ld-mobile-nav").addClass("expanded"), _() } function r(e, a) { var s = t(a)[0].hasAttribute("data-ld-expand-text") ? t(a).attr("data-ld-expand-text") : "Expand", l = t(a)[0].hasAttribute("data-ld-collapse-text") ? t(a).attr("data-ld-collapse-text") : "Collapse"; "collapse" == e ? (t(a).removeClass("ld-expanded"), "false" !== l && t(a).find(".ld-text").text(s)) : (t(a).addClass("ld-expanded"), "false" !== l && t(a).find(".ld-text").text(l)) } function c(e, a) { void 0 === a && (a = !1); var s = t(e).hasClass("ld-expanded"); if (t(e)[0].hasAttribute("data-ld-expands")) { var l = t(e).attr("data-ld-expands"), d = t("#" + l), o = t("#" + l).find(".ld-item-list-item-expanded"); o.length && (d = o); var i = 0; if (d.find("> *").each(function () { i += t(this).outerHeight() }), d.attr("data-height", "" + (i + 50)), t("#" + l)[0].hasAttribute("data-ld-expand-list")) { var n = t("#" + l).find(".ld-expand-button"); s ? (r("collapse", e), n.each(function () { c(t(this), !0) })) : (r("expand", e), n.each(function () { c(t(this)) })) } else t("#" + l).length ? s || 1 == a ? function (t, e, a) { e.removeClass("ld-expanded"), r("collapse", t), a.css({ "max-height": 0 }) }(e, t("#" + l), d) : function (t, e, a) { e.addClass("ld-expanded"), r("expand", t), a.css({ "max-height": a.data("height") }) }(e, t("#" + l), d) : console.log("LearnDash: No expandable content was found"); _() } } t(".ld-file-input").each(function () { var e = t(this), a = e.next("label"), s = a.html(); e.on("change", function (e) { var l = ""; this.files && this.files.length > 1 ? l = (this.getAttribute("data-multiple-caption") || "").replace("{count}", this.files.length) : e.target.value && (l = e.target.value.split("\\").pop()), l ? (a.find("span").html(l), a.addClass("ld-file-selected"), t("#uploadfile_btn").attr("disabled", !1)) : (a.html(s), a.removeClass("ld-file-selected"), t("#uploadfile_btn").attr("disabled", !0)) }), e.on("focus", function () { e.addClass("has-focus") }).on("blur", function () { e.removeClass("has-focus") }) }), t("body").on("click", ".ld-expand-button", function (e) { e.preventDefault(), c(t(this)), _() }), t("body").on("click", ".ld-search-prompt", function (e) { e.preventDefault(), t("#course_name_field").focus(), c(t(this)) }), t("body").on("click", ".ld-closer", function (e) { c(t(".ld-search-prompt"), !0) }), t("body").on("click", ".ld-tabs-navigation .ld-tab", function () { var e = t("#" + t(this).attr("data-ld-tab")); e.length && (t(".ld-tabs-navigation .ld-tab.ld-active").removeClass("ld-active"), t(this).addClass("ld-active"), t(".ld-tabs-content .ld-tab-content.ld-visible").removeClass("ld-visible"), e.addClass("ld-visible")), _() }); var u = t("*[data-ld-tooltip]"); function p() { if (t("#learndash-tooltips").length && (t("#learndash-tooltips").remove(), u = t("*[data-ld-tooltip]")), u.length) { t("body").prepend('<div id="learndash-tooltips"></div>'); u.each(function () { var e = t(this); e.hasClass("ld-item-list-item") && (e = e.find(".ld-item-title")); var a = e.offset().top, s = e.offset().left + e.outerWidth() / 2, l = t(this).attr("data-ld-tooltip"), d = Math.floor(99999 * Math.random()), o = '<span id="ld-tooltip-' + d + '" class="ld-tooltip" style="top:' + a + "px; left:" + s + 'px;">' + l + "</span>"; t(this).attr("data-ld-tooltip-id", d), t("#learndash-tooltips").append(o), 0; o = t("#ld-tooltip-" + d); t(this).hover(function () { o.addClass("ld-visible") }, function () { o.removeClass("ld-visible") }) }), t(window).on("resize", function () { _() }), t(window).add(".ld-focus-sidebar-wrapper").on("scroll", function () { t(".ld-visible.ld-tooltip").removeClass("ld-visible"), _() }), _() } } function f() { var e = t(".learndash-wrapper-login-modal"); void 0 !== e && (t(e).prependTo("body"), t(e).addClass("ld-modal-open"), t("html, body").animate({ scrollTop: t(".ld-modal", e).offset().top }, 50)) } function h() { t(".learndash-wrapper").removeClass("ld-modal-open") } function _() { void 0 !== u && setTimeout(function () { u.each(function () { var e = t(this), a = e.attr("data-ld-tooltip-id"); $tooltip = t("#ld-tooltip-" + a), e.hasClass("ld-item-list-item") && (e = e.find(".ld-item-title")), $tooltip.css({ top: e.offset().top, left: e.offset().left + e.outerWidth() / 2, "margin-left": 0, "margin-right": 0 }).removeClass("ld-shifted-left ld-shifted-right"), $tooltip.offset().left <= 0 && $tooltip.css({ "margin-left": Math.abs($tooltip.offset().left) }).addClass("ld-shifted-left"); var s = t(window).width() - ($tooltip.offset().left + $tooltip.outerWidth()); s <= 0 && $tooltip.css({ "margin-right": Math.abs(s) }).addClass("ld-shifted-right") }) }, 500) } if (p(), t("body").on("click", "#ld-profile .ld-reset-button", function (e) { e.preventDefault(); var a = { shortcode_instance: t("#ld-profile").data("shortcode_instance") }; t("#ld-profile #ld-main-course-list").addClass("ld-loading"), t.ajax({ type: "GET", url: ajaxurl + "?action=ld30_ajax_profile_search", data: a, success: function (e) { void 0 !== e.data.markup && t("#ld-profile").html(e.data.markup) } }) }), t("body").on("submit", ".ld-item-search-fields", function (e) { e.preventDefault(); var a = { shortcode_instance: t("#ld-profile").data("shortcode_instance") }; a["ld-profile-search"] = t(this).parents(".ld-item-search-wrapper").find("#course_name_field").val(), t("#ld-profile #ld-main-course-list").addClass("ld-loading"), t.ajax({ type: "GET", url: ajaxurl + "?action=ld30_ajax_profile_search", data: a, success: function (e) { void 0 !== e.data.markup && t("#ld-profile").html(e.data.markup) } }) }), t("body").on("click", ".ld-pagination a", function (e) { e.preventDefault(); var a = {}; t(this).attr("href").replace(/[?&]+([^=&]+)=([^&]*)/gi, function (t, e, s) { a[e] = s }), a.pager_results = t(this).parents(".ld-pagination").data("pager-results"), a.context = t(this).data("context"), "profile" != a.context && (a.lesson_id = t(this).data("lesson_id"), a.course_id = t(this).data("course_id"), t(".ld-course-nav-" + a.course_id).length && (a.widget_instance = t(".ld-course-nav-" + a.course_id).data("widget_instance"))), "course_topics" == a.context && (t("#ld-topic-list-" + a.lesson_id).addClass("ld-loading"), t("#ld-nav-content-list-" + a.lesson_id).addClass("ld-loading")), "course_lessons" == a.context && (t("#ld-item-list-" + a.course_id).addClass("ld-loading"), t("#ld-lesson-list-" + a.course_id).addClass("ld-loading")), "profile" == a.context && (t("#ld-profile #ld-main-course-list").addClass("ld-loading"), a.shortcode_instance = t("#ld-profile").data("shortcode_instance")), "course_content_shortcode" == a.context && (t(".ld-course-content-" + a.course_id).addClass("ld-loading"), a.shortcode_instance = t(".ld-course-content-" + a.course_id).data("shortcode_instance")), "course_info_courses" == a.context && (t(".ld-user-status").addClass("ld-loading"), a.shortcode_instance = t(".ld-user-status").data("shortcode-atts"), console.log(a)), t.ajax({ type: "GET", url: ajaxurl + "?action=ld30_ajax_pager", data: a, success: function (e) { var s, l; "course_topics" == a.context && (t("#ld-topic-list-" + a.lesson_id).length && (void 0 !== e.data.topics && t("#ld-topic-list-" + a.lesson_id).html(e.data.topics), void 0 !== e.data.pager && t("#ld-expand-" + a.lesson_id).find(".ld-table-list-footer").html(e.data.pager), s = t(".ld-lesson-item-" + a.lesson_id).find(".ld-item-list-item-expanded"), l = 0, s.find("> *").each(function () { l += t(this).outerHeight() }), s.attr("data-height", "" + (l + 50)), s.css({ "max-height": l + 50 }), t("#ld-topic-list-" + a.lesson_id).removeClass("ld-loading")), t("#ld-nav-content-list-" + a.lesson_id).length && (void 0 !== e.data.nav_topics && t("#ld-nav-content-list-" + a.lesson_id).find(".ld-table-list-items").html(e.data.topics), void 0 !== e.data.pager && t("#ld-nav-content-list-" + a.lesson_id).find(".ld-table-list-footer").html(e.data.pager), t("#ld-nav-content-list-" + a.lesson_id).removeClass("ld-loading"))), "course_lessons" == a.context && (t("#ld-item-list-" + a.course_id).length && void 0 !== e.data.lessons && t("#ld-item-list-" + a.course_id).html(e.data.lessons).removeClass("ld-loading"), t("#ld-lesson-list-" + a.course_id).length && void 0 !== e.data.nav_lessons && t("#ld-lesson-list-" + a.course_id).html(e.data.nav_lessons).removeClass("ld-loading")), "profile" == a.context && void 0 !== e.data.markup && t("#ld-profile").html(e.data.markup), "course_content_shortcode" == a.context && void 0 !== e.data.markup && t("#learndash_post_" + a.course_id).replaceWith(e.data.markup), "course_info_courses" == a.context && void 0 !== e.data.markup && t(".ld-user-status").replaceWith(e.data.markup), t("body").trigger("ld_has_paginated"), p() } }) }), t("#learndash_timer").length) { var v = jQuery("#learndash_timer"), m = v.attr("data-timer-seconds"), g = jQuery(v.attr("data-button")), b = v.attr("data-cookie-key"); if (void 0 !== b) var x = "learndash_timer_cookie_" + b; else x = "learndash_timer_cookie"; cookie_timer_seconds = jQuery.cookie(x), "undefined" != typeof cookie_timer_seconds && (m = parseInt(cookie_timer_seconds)), 0 == m && t(v).hide(), t(g).on("learndash-time-finished", function () { t(v).hide() }) } t(document).on("learndash_video_disable_assets", function (e, a) { if ("undefined" == typeof learndash_video_data) return !1; "BEFORE" == learndash_video_data.videos_shown && (1 == a ? (t(".ld-lesson-topic-list").hide(), t(".ld-lesson-navigation").find("#ld-nav-content-list-" + ldVars.postID).addClass("user_has_no_access"), t(".ld-quiz-list").hide()) : (t(".ld-lesson-topic-list").slideDown(), t(".ld-quiz-list").slideDown(), t(".ld-lesson-navigation").find("#ld-nav-content-list-" + ldVars.postID).removeClass("user_has_no_access"))) }), t(".learndash-wrapper").on("click", '.wpProQuiz_questionListItem input[type="radio"]', function (e) { t(this).parents(".wpProQuiz_questionList").find("label").removeClass("is-selected"), t(this).parents("label").addClass("is-selected") }) });